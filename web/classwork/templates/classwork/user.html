{% extends "generic/base.html" %}

{% block head %}
<title>Your Profile</title>
{% endblock head %}


{% block content %}

<section>
  <header>
    <h2>{{ profile }} Profile Details</h2>
    {% if profile.bio %}
    <p>{{profile.bio}}</p>
    {% else %}
    <p>Currently no profile available</p>
    {% endif %}
    <h3>Resources</h3>
  </header>

  {% for key, values in resources.items %}
  <article>
    <h4>{{key}}</h4>
    <ul>
      {% for res in values %}
      <li><a href="{% url 'resource_detail' id=res.id %}">res: {{res}}</a></li>
      {% endfor %}
    </ul>
  </article>
  {% endfor %}

</section>

<section>
  <article>
    <h3>User Account Details</h3>
    <ul>
      <li>First Name: {{ profile.user.first_name }} </li>
      <li>Last Name: {{ profile.user.last_name }} </li>
      <li>Email: {{ profile.user.email }} </li>
      {% if profile.username != profile.user.email %}
      <li>Login Name: {{ profile.username }}  </li>
      {% endif %}
      <li>
        Billing Address: <br />
        {{ profile.user.billing_address_1 }} <br />
        {% if profile.user.billing_address_2 %}
        {{ profile.user.billing_address_2 }} <br />
        {% endif %}
        {{ profile.user.billing_city }},
        {{ profile.user.billing_country_area }}
        {% if profile.user.billing_country_code != 'US'  %}
        {{ profile.user.billing_country_code }}
        {% endif %}
        {{ profile.user.billing_postcode }}
      </li>
      <p>
        Update Account Details
      </p>
    </ul>

  </article>

  <header>
    <h3>Class History</h3>
    <p>These are the classes we have records of you attending. Contact us if any seem missing. </p>
  </header>

  {% for classoffer in had %}
  <article>
    <h4>{{classoffer}}</h4>
    <p>
      {{classoffer.start_date}} to {{classoffer.end_date}} |
      {{classoffer.start_time}} - {{classoffer.end_time}} |
      <br />
      Taught by: {{classoffer.teachers}} |
    </p>
  </article>
  {% endfor %}

</section>

{% endblock content %}
